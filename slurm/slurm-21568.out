WARNING:tensorflow:From code2seq.py:29: The name tf.set_random_seed is deprecated. Please use tf.compat.v1.set_random_seed instead.

WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/model.py:20: The name tf.Session is deprecated. Please use tf.compat.v1.Session instead.

2020-01-26 19:08:22.748063: I tensorflow/core/platform/cpu_feature_guard.cc:145] This TensorFlow binary is optimized with Intel(R) MKL-DNN to use the following CPU instructions in performance critical operations:  SSE4.1 SSE4.2 AVX AVX2 AVX512F FMA
To enable them in non-MKL-DNN operations, rebuild TensorFlow with the appropriate compiler flags.
2020-01-26 19:08:22.788410: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100000000 Hz
2020-01-26 19:08:22.790447: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x55726c4097a0 initialized for platform Host (this does not guarantee that XLA will be used). Devices:
2020-01-26 19:08:22.790487: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version
OMP: Info #212: KMP_AFFINITY: decoding x2APIC ids.
OMP: Info #210: KMP_AFFINITY: Affinity capable, using global cpuid leaf 11 info
OMP: Info #154: KMP_AFFINITY: Initial OS proc set respected: 8,10,12,14
OMP: Info #156: KMP_AFFINITY: 4 available OS procs
OMP: Info #157: KMP_AFFINITY: Uniform topology
OMP: Info #179: KMP_AFFINITY: 1 packages x 4 cores/pkg x 1 threads/core (4 total cores)
OMP: Info #214: KMP_AFFINITY: OS proc to physical thread map:
OMP: Info #171: KMP_AFFINITY: OS proc 8 maps to package 0 core 2 
OMP: Info #171: KMP_AFFINITY: OS proc 10 maps to package 0 core 3 
OMP: Info #171: KMP_AFFINITY: OS proc 12 maps to package 0 core 8 
OMP: Info #171: KMP_AFFINITY: OS proc 14 maps to package 0 core 12 
OMP: Info #250: KMP_AFFINITY: pid 341016 tid 341016 thread 0 bound to OS proc set 8
2020-01-26 19:08:22.794691: I tensorflow/core/common_runtime/process_util.cc:115] Creating new thread pool with default inter op setting: 2. Tune using inter_op_parallelism_threads for best performance.
Dictionaries loaded.
Loaded subtoken vocab. size: 73906
Loaded target word vocab. size: 11319
Loaded nodes vocab. size: 323
Created model
Starting training
WARNING:tensorflow:
The TensorFlow contrib module will not be included in TensorFlow 2.0.
For more information, please see:
  * https://github.com/tensorflow/community/blob/master/rfcs/20180907-contrib-sunset.md
  * https://github.com/tensorflow/addons
  * https://github.com/tensorflow/io (for I/O related ops)
If you depend on functionality not listed there, please file an issue.

WARNING:tensorflow:From /home/aagusev2/anaconda3/envs/tf_env/lib/python3.7/site-packages/tensorflow_core/python/data/util/random_seed.py:58: where (from tensorflow.python.ops.array_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use tf.where in 2.0, which has the same broadcast rule as np.where
WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/reader.py:188: map_and_batch (from tensorflow.python.data.experimental.ops.batching) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.data.Dataset.map(map_func, num_parallel_calls)` followed by `tf.data.Dataset.batch(batch_size, drop_remainder)`. Static tf.data optimizations will take care of using the fused implementation.
WARNING:tensorflow:From /home/aagusev2/anaconda3/envs/tf_env/lib/python3.7/site-packages/tensorflow_core/python/autograph/converters/directives.py:119: The name tf.random_shuffle is deprecated. Please use tf.random.shuffle instead.

WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/reader.py:92: calling string_split (from tensorflow.python.ops.ragged.ragged_string_ops) with delimiter is deprecated and will be removed in a future version.
Instructions for updating:
delimiter is deprecated, please use sep instead.
WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/reader.py:101: to_int64 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.cast` instead.
WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/reader.py:159: to_float (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.cast` instead.
/home/aagusev2/anaconda3/envs/tf_env/lib/python3.7/site-packages/tensorflow_core/python/data/ops/dataset_ops.py:1378: UserWarning: Seed 239 from outer graph might be getting used by function tf_data_experimental_map_and_batch_Reader.process_dataset, if the random op has not been provided any seed. Explicitly set the seed in the function if this is not the intended behavior.
  dataset = transformation_func(self)
WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/reader.py:190: DatasetV1.make_initializable_iterator (from tensorflow.python.data.ops.dataset_ops) is deprecated and will be removed in a future version.
Instructions for updating:
Use `for ... in dataset:` to iterate over a dataset. If using `tf.estimator`, return the `Dataset` object directly from your input function. As a last resort, you can use `tf.compat.v1.data.make_initializable_iterator(dataset)`.
WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/model.py:342: The name tf.variable_scope is deprecated. Please use tf.compat.v1.variable_scope instead.

WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/model.py:343: The name tf.get_variable is deprecated. Please use tf.compat.v1.get_variable instead.

WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/model.py:480: LSTMCell.__init__ (from tensorflow.python.ops.rnn_cell_impl) is deprecated and will be removed in a future version.
Instructions for updating:
This class is equivalent as tf.keras.layers.LSTMCell, and will be replaced by that in Tensorflow 2.0.
WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/model.py:483: The name tf.nn.rnn_cell.DropoutWrapper is deprecated. Please use tf.compat.v1.nn.rnn_cell.DropoutWrapper instead.

WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/model.py:492: bidirectional_dynamic_rnn (from tensorflow.python.ops.rnn) is deprecated and will be removed in a future version.
Instructions for updating:
Please use `keras.layers.Bidirectional(keras.layers.RNN(cell))`, which is equivalent to this API
WARNING:tensorflow:From /home/aagusev2/anaconda3/envs/tf_env/lib/python3.7/site-packages/tensorflow_core/python/ops/rnn.py:464: dynamic_rnn (from tensorflow.python.ops.rnn) is deprecated and will be removed in a future version.
Instructions for updating:
Please use `keras.layers.RNN(cell)`, which is equivalent to this API
WARNING:tensorflow:From /home/aagusev2/anaconda3/envs/tf_env/lib/python3.7/site-packages/tensorflow_core/python/ops/rnn_cell_impl.py:958: Layer.add_variable (from tensorflow.python.keras.engine.base_layer) is deprecated and will be removed in a future version.
Instructions for updating:
Please use `layer.add_weight` method instead.
WARNING:tensorflow:From /home/aagusev2/anaconda3/envs/tf_env/lib/python3.7/site-packages/tensorflow_core/python/ops/rnn_cell_impl.py:962: calling Zeros.__init__ (from tensorflow.python.ops.init_ops) with dtype is deprecated and will be removed in a future version.
Instructions for updating:
Call initializer instance with the dtype argument instead of passing it to the constructor
WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/model.py:536: calling dropout (from tensorflow.python.ops.nn_ops) with keep_prob is deprecated and will be removed in a future version.
Instructions for updating:
Please use `rate` instead of `keep_prob`. Rate should be set to `rate = 1 - keep_prob`.
WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/model.py:539: dense (from tensorflow.python.layers.core) is deprecated and will be removed in a future version.
Instructions for updating:
Use keras.layers.Dense instead.
WARNING:tensorflow:From /home/aagusev2/anaconda3/envs/tf_env/lib/python3.7/site-packages/tensorflow_core/python/layers/core.py:187: Layer.apply (from tensorflow.python.keras.engine.base_layer) is deprecated and will be removed in a future version.
Instructions for updating:
Please use `layer.__call__` method instead.
WARNING:tensorflow:From /home/aagusev2/anaconda3/envs/tf_env/lib/python3.7/site-packages/tensorflow_core/python/util/deprecation.py:507: calling count_nonzero (from tensorflow.python.ops.math_ops) with axis is deprecated and will be removed in a future version.
Instructions for updating:
reduction_indices is deprecated, use axis instead
WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/model.py:406: MultiRNNCell.__init__ (from tensorflow.python.ops.rnn_cell_impl) is deprecated and will be removed in a future version.
Instructions for updating:
This class is equivalent as tf.keras.layers.StackedRNNCells, and will be replaced by that in Tensorflow 2.0.
WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/model.py:411: The name tf.nn.rnn_cell.LSTMStateTuple is deprecated. Please use tf.compat.v1.nn.rnn_cell.LSTMStateTuple instead.

WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/model.py:413: The name tf.layers.Dense is deprecated. Please use tf.compat.v1.layers.Dense instead.

WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/model.py:383: The name tf.train.exponential_decay is deprecated. Please use tf.compat.v1.train.exponential_decay instead.

WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/model.py:386: The name tf.train.MomentumOptimizer is deprecated. Please use tf.compat.v1.train.MomentumOptimizer instead.

WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/model.py:395: The name tf.train.Saver is deprecated. Please use tf.compat.v1.train.Saver instead.

Training batch size:			 512
Dataset path:				 data/java-small/java-small
Training file path:			 data/java-small/java-small.train.c2s
Validation path:			 data/java-small/java-small.val.c2s
Taking max contexts from each example:	 200
Random path sampling:			 True
Embedding size:				 128
Using BiLSTMs, each of size:		 128
Decoder size:				 320
Decoder layers:				 1
Max path lengths:			 9
Max subtokens in a token:		 5
Max target length:			 6
Embeddings dropout keep_prob:		 0.75
LSTM dropout keep_prob:			 0.5
============================================
WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/model.py:81: The name tf.trainable_variables is deprecated. Please use tf.compat.v1.trainable_variables instead.

Number of trainable params: 16290752
WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/model.py:707: The name tf.global_variables_initializer is deprecated. Please use tf.compat.v1.global_variables_initializer instead.

WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/model.py:707: The name tf.local_variables_initializer is deprecated. Please use tf.compat.v1.local_variables_initializer instead.

WARNING:tensorflow:From /home/aagusev2/vocabularyForSourceCode/code2seq/model.py:707: The name tf.tables_initializer is deprecated. Please use tf.compat.v1.tables_initializer instead.

Initalized variables
Started reader...
OMP: Info #250: KMP_AFFINITY: pid 341016 tid 341049 thread 1 bound to OS proc set 10
OMP: Info #250: KMP_AFFINITY: pid 341016 tid 341074 thread 2 bound to OS proc set 12
OMP: Info #250: KMP_AFFINITY: pid 341016 tid 341050 thread 3 bound to OS proc set 14
OMP: Info #250: KMP_AFFINITY: pid 341016 tid 341122 thread 6 bound to OS proc set 12
OMP: Info #250: KMP_AFFINITY: pid 341016 tid 341120 thread 4 bound to OS proc set 8
OMP: Info #250: KMP_AFFINITY: pid 341016 tid 341121 thread 5 bound to OS proc set 10
Average loss at batch 100: 28.861471, 	throughput: 43 samples/sec
Average loss at batch 200: 19.570849, 	throughput: 43 samples/sec
Average loss at batch 300: 18.155249, 	throughput: 42 samples/sec
slurmstepd: error: *** JOB 21568 ON cn-009 CANCELLED AT 2020-01-26T20:24:27 ***
